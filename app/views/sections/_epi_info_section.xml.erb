<Page PageId="<%= page_id %>" Name="<%= section.name %>" Position="<%= position %>"  BackgroundId="" ViewId="1">
  <% tab_counter = 0 %>
        <Field
          Name="<%= section.name %>"
          PageId="<%= page_id %>"
          FieldId="<%= section.id %>"
          UniqueId="<%= section.version_independent_id %>"
          FieldTypeId="21"
          ControlAfterCheckCode=""
          ControlBeforeCheckCode=""
          PageName="Page <%= page_id %>"
          PageBeforeCheckCode=""
          PageAfterCheckCode=""
          Position="<%= position %>"
          ControlTopPositionPercentage="0.0177165354330709"
          ControlLeftPositionPercentage="0"
          ControlHeightPercentage="0.0206692913385827"
          ControlWidthPercentage="0.256410256410256"
          ControlScriptName=""
          PromptTopPositionPercentage=""
          PromptLeftPositionPercentage=""
          PromptText="<%= section.name %>"
          PromptFontFamily="Century Gothic"
          PromptFontSize="8"
          PromptFontStyle="Regular"
          ControlFontFamily="Century Gothic"
          ControlFontSize="12"
          ControlFontStyle="Bold"
          PromptScriptName=""
          ShouldRepeatLast="False"
          IsRequired="False"
          IsReadOnly="False"
          ShouldRetainImageSize="False"
          Pattern=""
          MaxLength=""
          ShowTextOnRight="False"
          Lower=""
          Upper=""
          RelateCondition=""
          ShouldReturnToParent="False"
          RelatedViewId=""
          List="<%= section.nested_item_names %>"
          SourceTableName=""
          CodeColumnName=""
          TextColumnName=""
          BackgroundColor=""
          Sort="False"
          IsExclusiveTable="False"
          TabIndex="<%= tab_counter += 1 %>"
          HasTabStop="True"
          SourceFieldId="" />
  <% section.flatten_nested_sections.each do |sni| %>
        <Field
          Name="<%= sni.nested_section.name %>"
          PageId="<%= page_id %>"
          FieldId="<%= sni.id %>"
          UniqueId="<%= sni.nested_section.version_independent_id %>"
          FieldTypeId="21"
          ControlAfterCheckCode=""
          ControlBeforeCheckCode=""
          PageName="Page <%= page_id %>"
          PageBeforeCheckCode=""
          PageAfterCheckCode=""
          Position="<%= position %>"
          ControlTopPositionPercentage="0.0177165354330709"
          ControlLeftPositionPercentage="0"
          ControlHeightPercentage="0.0206692913385827"
          ControlWidthPercentage="0.256410256410256"
          ControlScriptName=""
          PromptTopPositionPercentage=""
          PromptLeftPositionPercentage=""
          PromptText="<%= sni.nested_section.name %>"
          PromptFontFamily="Century Gothic"
          PromptFontSize="8"
          PromptFontStyle="Regular"
          ControlFontFamily="Century Gothic"
          ControlFontSize="12"
          ControlFontStyle="Regular"
          PromptScriptName=""
          ShouldRepeatLast="False"
          IsRequired="False"
          IsReadOnly="False"
          ShouldRetainImageSize="False"
          Pattern=""
          MaxLength=""
          ShowTextOnRight="False"
          Lower=""
          Upper=""
          RelateCondition=""
          ShouldReturnToParent="False"
          RelatedViewId=""
          List="<%= sni.nested_section.nested_item_names %>"
          SourceTableName=""
          CodeColumnName=""
          TextColumnName=""
          BackgroundColor=""
          Sort="False"
          IsExclusiveTable="False"
          TabIndex="<%= tab_counter += 1 %>"
          HasTabStop="True"
          SourceFieldId="" />
  <% end %>
  <% section.flatten_questions.each do |sni| %>
        <Field
          Name="<%= sni.question.content %>"
          PageId="<%= page_id %>"
          FieldId="<%= sni.id %>"
          UniqueId="<%= sni.question.version_independent_id %>"
          FieldTypeId="<%= epi_info_field_type(sni.question.response_type.code) %>"
          ControlAfterCheckCode=""
          ControlBeforeCheckCode=""
          PageName="<%= section.name %>"
          PageBeforeCheckCode=""
          PageAfterCheckCode=""
          Position="<%= position %>"
          ControlTopPositionPercentage="0.0177165354330709"
          ControlLeftPositionPercentage="0"
          ControlHeightPercentage="0.0206692913385827"
          ControlWidthPercentage="0.256410256410256"
          ControlScriptName=""
          PromptTopPositionPercentage=""
          PromptLeftPositionPercentage=""
          PromptText="<%= sni.question.content %>"
          PromptFontFamily="Century Gothic"
          PromptFontSize="8"
          PromptFontStyle="Regular"
          ControlFontFamily="Century Gothic"
          ControlFontSize="12"
          ControlFontStyle="Regular"
          PromptScriptName=""
          ShouldRepeatLast="False"
          IsRequired="False"
          IsReadOnly="False"
          ShouldRetainImageSize="False"
          Pattern=""
          MaxLength=""
          ShowTextOnRight="False"
          Lower=""
          Upper=""
          RelateCondition=""
          ShouldReturnToParent="False"
          RelatedViewId=""
          List=""
          SourceTableName="<%= sni.response_set.nil? ? '' : sni.response_set.id %>"
          CodeColumnName="code"
          TextColumnName="displayName"
          BackgroundColor=""
          Sort="True"
          IsExclusiveTable="False"
          TabIndex="<%= tab_counter += 1 %>"
          HasTabStop="True"
          SourceFieldId=""/>
    <% end %>
      </Page>
