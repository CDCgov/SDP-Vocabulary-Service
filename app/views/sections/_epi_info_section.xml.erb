<Page PageId="<%= page_id %>" Name="<%= 'Page' + section.name.parameterize.underscore.camelize %>" Position="<%= position %>"  BackgroundId="0" ViewId="1">
  <% tab_counter = 0 %>
        <Field
          Name="<%= section.name.parameterize.underscore.camelize %>"
          PageId="<%= page_id %>"
          FieldId="<%= section.id %>"
          UniqueId=""
          FieldTypeId="21"
          ControlAfterCheckCode=""
          ControlBeforeCheckCode=""
          PageName="<%= 'Page' + section.name.parameterize.underscore.camelize %>"
          PageBeforeCheckCode=""
          PageAfterCheckCode=""
          Position="<%= position %>"
          ControlTopPositionPercentage="0"
          ControlLeftPositionPercentage="0"
          ControlHeightPercentage="1"
          ControlWidthPercentage="1"
          ControlScriptName=""
          PromptTopPositionPercentage=""
          PromptLeftPositionPercentage=""
          PromptText="<%= section.name %>"
          PromptFontFamily="Century Gothic"
          PromptFontSize="8"
          PromptFontStyle="Regular"
          ControlFontFamily="Century Gothic"
          ControlFontSize="12"
          ControlFontStyle="Bold"
          PromptScriptName=""
          ShouldRepeatLast="False"
          IsRequired="False"
          IsReadOnly="False"
          ShouldRetainImageSize="False"
          Pattern=""
          MaxLength=""
          ShowTextOnRight="False"
          Lower=""
          Upper=""
          RelateCondition=""
          ShouldReturnToParent="False"
          RelatedViewId=""
          List="<%= section.nested_item_names %>"
          SourceTableName=""
          CodeColumnName=""
          TextColumnName=""
          BackgroundColor=""
          Sort="False"
          IsExclusiveTable="False"
          TabIndex="<%= tab_counter += 1 %>"
          HasTabStop="True"
          SourceFieldId="" />
  <% section.flatten_nested_sections.each do |sni| %>
        <Field
          Name="<%= sni.nested_section.name.parameterize.underscore.camelize %>"
          PageId="<%= page_id %>"
          FieldId="<%= sni.id %>"
          UniqueId=""
          FieldTypeId="21"
          ControlAfterCheckCode=""
          ControlBeforeCheckCode=""
          PageName="<%= 'Page' + section.name.parameterize.underscore.camelize %>"
          PageBeforeCheckCode=""
          PageAfterCheckCode=""
          Position="<%= position %>"
          ControlTopPositionPercentage=""
          ControlLeftPositionPercentage=""
          ControlHeightPercentage=""
          ControlWidthPercentage=""
          ControlScriptName=""
          PromptTopPositionPercentage=""
          PromptLeftPositionPercentage=""
          PromptText="<%= sni.nested_section.name %>"
          PromptFontFamily="Century Gothic"
          PromptFontSize="8"
          PromptFontStyle="Regular"
          ControlFontFamily="Century Gothic"
          ControlFontSize="12"
          ControlFontStyle="Regular"
          PromptScriptName=""
          ShouldRepeatLast="False"
          IsRequired="False"
          IsReadOnly="False"
          ShouldRetainImageSize="False"
          Pattern=""
          MaxLength=""
          ShowTextOnRight="False"
          Lower=""
          Upper=""
          RelateCondition=""
          ShouldReturnToParent="False"
          RelatedViewId=""
          List="<%= sni.nested_section.nested_item_names %>"
          SourceTableName=""
          CodeColumnName=""
          TextColumnName=""
          BackgroundColor=""
          Sort="False"
          IsExclusiveTable="False"
          TabIndex="<%= tab_counter += 1 %>"
          HasTabStop="True"
          SourceFieldId="" />
  <% end %>
  <% section.flatten_questions.each do |sni| %>
        <Field
          Name="<%= sni.question.content.parameterize.underscore.camelize %>"
          PageId="<%= page_id %>"
          FieldId="<%= sni.id %>"
          UniqueId=""
          FieldTypeId="<%= epi_info_field_type(sni.question.response_type.code) %>"
          ControlAfterCheckCode=""
          ControlBeforeCheckCode=""
          PageName="<%= 'Page' + section.name.parameterize.underscore.camelize %>"
          PageBeforeCheckCode=""
          PageAfterCheckCode=""
          Position="<%= position %>"
          ControlTopPositionPercentage=""
          ControlLeftPositionPercentage=""
          ControlHeightPercentage=""
          ControlWidthPercentage=""
          ControlScriptName=""
          PromptTopPositionPercentage=""
          PromptLeftPositionPercentage=""
          PromptText="<%= sni.question.content %>"
          PromptFontFamily="Century Gothic"
          PromptFontSize="8"
          PromptFontStyle="Regular"
          ControlFontFamily="Century Gothic"
          ControlFontSize="12"
          ControlFontStyle="Regular"
          PromptScriptName=""
          ShouldRepeatLast="False"
          IsRequired="False"
          IsReadOnly="False"
          ShouldRetainImageSize="False"
          Pattern=""
          MaxLength=""
          ShowTextOnRight="False"
          Lower=""
          Upper=""
          RelateCondition=""
          ShouldReturnToParent="False"
          RelatedViewId=""
          List=""
          SourceTableName="<%= sni.response_set.nil? ? '' : 'code' + sni.response_set.name.parameterize.underscore.camelize %>"
          CodeColumnName=""
          TextColumnName="<%= sni.response_set.nil? ? '' : sni.response_set.name.parameterize.underscore.camelize %>"
          BackgroundColor=""
          Sort="True"
          IsExclusiveTable="False"
          TabIndex="<%= tab_counter += 1 %>"
          HasTabStop="True"
          SourceFieldId=""/>
    <% end %>
      </Page>
